<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Homepage</title>
    <link rel="stylesheet" type="text/css" href="css/style.css">
</head>

<body>
    <!-- Display time above the greeting message -->
    <div id="timeContainer">
        <p id="currentTime"></p>
    </div>
    <!-- Display greeting message above the cards container -->
    <div id="greetingContainer">
        <p id="greetingMessage"></p>
    </div>

    <div id="container">
        <div class="sqr">
            <span>Reddit</span>
            <div class="content">
                <a href="https://www.reddit.com/r/unixporn/" target="_blank">Unixporn!</a>
            </div>
        </div>

        <div class="sqr">
            <span>Media</span>
            <div class="content">
                <a href="https://youtube.com/" target="_blank">Youtube!</a>
                <a href="https://spotify.com/" target="_blank">Spotify!</a>
                <a href="https://aniwave.to/home" target="_blank">Aniwave!</a>
                <a href="https://mail.google.com/mail" target="_blank">Gmail!</a>
            </div>
        </div>

        <div class="sqr">
            <span>Programming</span>
            <div class="content">
                <a href="https://github.com/" target="_blank">GitHub!</a>
                <a href="https://chat.openai.com/" target="_blank">ChatGPT!</a>
            </div>
        </div>

        <div class="sqr" id="search_sqr">
            <span>Search</span>
            <div class="content">
                <p id="selectedSearchEngineText" class="search-engine-text"></p>
                <input id="searchinput" autocomplete="on" placeholder="Search the web...">
            </div>
        </div>
    </div>

    <div id="editIcon" onclick="toggleEditMenu()">
        <img src="assets/edit.png" alt="Edit Icon">
    </div>

    <div id="editMenu">
        <a href="https://github.com/rifsxd/my-comfy-homepage/edit/main/index.html" class="editLink" target="_blank">Edit
            Code</a>
        <a href="https://github.com/rifsxd/my-comfy-homepage/edit/main/css/style.css" class="editLink"
            target="_blank">Edit Style</a>
    </div>

    <script>
        // Function to get the host machine username
        function getHostUsername() {
            // Placeholder username for demonstration
            return "RifsxD";
        }

        // Function to update the displayed time
        function updateTime() {
            var currentTimeElement = document.getElementById("currentTime");
            var currentTime = new Date();
            var hours = currentTime.getHours();
            var minutes = currentTime.getMinutes();

            // Format hours and minutes with leading zero if less than 10
            hours = hours < 10 ? "0" + hours : hours;
            minutes = minutes < 10 ? "0" + minutes : minutes;

            currentTimeElement.textContent = hours + ":" + minutes;
        }


        // Call updateTime function every second to keep the time updated
        setInterval(updateTime, 1000);

        // Function to get the current time and return a greeting
        function getGreeting() {
            var currentTime = new Date().getHours();

            if (currentTime >= 5 && currentTime < 12) {
                return "Good morning";
            } else if (currentTime >= 12 && currentTime < 18) {
                return "Good afternoon";
            } else if (currentTime >= 18 && currentTime < 22) {
                return "Good evening";
            } else {
                return "Good night";
            }
        }

        var searchEngine = "google"; // Change this variable to choose the search engine

        // Function to update the selected search engine text
        function updateSelectedSearchEngineText() {
            var selectedSearchEngineText = document.getElementById("selectedSearchEngineText");
            selectedSearchEngineText.textContent =
                searchEngine.charAt(0).toUpperCase() + searchEngine.slice(1) + "!";
        }

        // Display greeting and update search engine text on page load
        document.addEventListener("DOMContentLoaded", function () {
            var greeting = getGreeting();
            var greetingMessage = document.getElementById("greetingMessage");
            var hostUsername = getHostUsername();
            greetingMessage.textContent = greeting + " " + hostUsername;

            updateSelectedSearchEngineText();
        });

        document.getElementById("searchinput").addEventListener("keyup", function (event) {
            if (event.key === "Enter") {
                var searchQuery = document.getElementById("searchinput").value;
                if (searchQuery.trim() !== "") {
                    var searchUrl;
                    switch (searchEngine) {
                        case "duckduckgo":
                            searchUrl = "https://duckduckgo.com/?q=" + encodeURIComponent(searchQuery);
                            break;
                        case "bing":
                            searchUrl = "https://www.bing.com/search?q=" + encodeURIComponent(searchQuery);
                            break;
                        default:
                            searchUrl = "https://www.google.com/search?q=" + encodeURIComponent(searchQuery);
                            break;
                    }
                    window.open(searchUrl, "_blank");
                }
            }
        });

        function toggleEditMenu() {
            var editMenu = document.getElementById("editMenu");
            editMenu.classList.toggle("show");
        }
    </script>
</body>

</html>
